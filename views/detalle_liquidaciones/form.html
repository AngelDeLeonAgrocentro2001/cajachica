<h2><?php echo isset($data) ? 'Editar Detalle de Liquidación' : 'Crear Detalle de Liquidación'; ?></h2>
<form id="detalleFormInner">
    <input type="hidden" name="id" value="<?php echo isset($data) ? htmlspecialchars($data['id']) : ''; ?>">
    <select name="id_liquidacion" required>
        {{select_liquidaciones}}
    </select>
    <input type="text" name="no_factura" placeholder="Número Factura" value="<?php echo isset($data) ? htmlspecialchars($data['no_factura']) : ''; ?>" required>
    <input type="text" name="nombre_proveedor" placeholder="Nombre Proveedor" value="<?php echo isset($data) ? htmlspecialchars($data['nombre_proveedor']) : ''; ?>" required>
    <input type="date" name="fecha" value="<?php echo isset($data) ? htmlspecialchars($data['fecha']) : ''; ?>" required>
    <input type="text" name="bien_servicio" placeholder="Bien/Servicio" value="<?php echo isset($data) ? htmlspecialchars($data['bien_servicio']) : ''; ?>" required>
    <select name="t_gasto" required>
        {{select_tipos_gastos}}
    </select>
    <input type="number" name="p_unitario" step="0.01" placeholder="Precio Unitario" value="<?php echo isset($data) ? htmlspecialchars($data['p_unitario']) : ''; ?>" required>
    <input type="number" name="total_factura" step="0.01" placeholder="Total Factura" value="<?php echo isset($data) ? htmlspecialchars($data['total_factura']) : ''; ?>" required>
    <select name="estado" required>
        <option value="PENDIENTE" <?php echo isset($data) && $data['estado'] === 'PENDIENTE' ? 'selected' : ''; ?>>Pendiente</option>
        <?php if (isset($data)): ?>
            <option value="AUTORIZADO_POR_SUPERVISOR" <?php echo $data['estado'] === 'AUTORIZADO_POR_SUPERVISOR' ? 'selected' : ''; ?>>Autorizado por Supervisor</option>
            <option value="RECHAZADO_POR_SUPERVISOR" <?php echo $data['estado'] === 'RECHAZADO_POR_SUPERVISOR' ? 'selected' : ''; ?>>Rechazado por Supervisor</option>
            <option value="AUTORIZADO_POR_CONTABILIDAD" <?php echo $data['estado'] === 'AUTORIZADO_POR_CONTABILIDAD' ? 'selected' : ''; ?>>Autorizado por Contabilidad</option>
            <option value="RECHAZADO_POR_CONTABILIDAD" <?php echo $data['estado'] === 'RECHAZADO_POR_CONTABILIDAD' ? 'selected' : ''; ?>>Rechazado por Contabilidad</option>
            <option value="DESCARTADO" <?php echo $data['estado'] === 'DESCARTADO' ? 'selected' : ''; ?>>Descartado</option>
        <?php endif; ?>
    </select>
    <input type="file" name="archivos[]" multiple accept="image/*,application/pdf">
    <div class="error" data-field="id_liquidacion"></div>
    <div class="error" data-field="no_factura"></div>
    <div class="error" data-field="nombre_proveedor"></div>
    <div class="error" data-field="fecha"></div>
    <div class="error" data-field="bien_servicio"></div>
    <div class="error" data-field="t_gasto"></div>
    <div class="error" data-field="p_unitario"></div>
    <div class="error" data-field="total_factura"></div>
    <div class="error" data-field="estado"></div>
    <div class="success"></div>
    <div class="error"></div>
    <button type="submit"><?php echo isset($data) ? 'Actualizar' : 'Crear'; ?></button>
    <button type="button" onclick="closeModal()">Cancelar</button>
</form>