<h2><?php echo isset($usuario['id']) ? 'Editar Usuario' : 'Crear Usuario'; ?></h2>
<form id="usuarioFormInner">
    <input type="hidden" name="id" value="<?php echo isset($usuario['id']) ? htmlspecialchars($usuario['id']) : ''; ?>">
    <label for="nombre">Nombre</label>
    <input type="text" id="nombre" name="nombre" placeholder="Nombre" value="<?php echo isset($usuario['nombre']) ? htmlspecialchars($usuario['nombre']) : ''; ?>" required>
    <div class="error" data-field="nombre"></div>
    <label for="email">Email</label>
    <input type="email" id="email" name="email" placeholder="Email" value="<?php echo isset($usuario['email']) ? htmlspecialchars($usuario['email']) : ''; ?>" required>
    <div class="error" data-field="email"></div>
    <label for="password">Contraseña</label>
    <input type="password" id="password" name="password" placeholder="Contraseña" <?php echo isset($usuario['id']) ? '' : 'required'; ?>>
    <div class="error" data-field="password"></div>
    <label for="id_rol">Rol</label>
    <select id="id_rol" name="id_rol" required>
        <option value="" disabled <?php echo !isset($usuario['id_rol']) ? 'selected' : ''; ?>>Seleccionar Rol</option>
        <?php foreach ($roles as $rol): ?>
            <option value="<?php echo htmlspecialchars($rol['id']); ?>" <?php echo isset($usuario['id_rol']) && $usuario['id_rol'] == $rol['id'] ? 'selected' : ''; ?>>
                <?php echo htmlspecialchars($rol['nombre']); ?>
            </option>
        <?php endforeach; ?>
    </select>
    <div class="error" data-field="id_rol"></div>
    <div class="success"></div>
    <div class="error"></div>
    <button type="submit"><?php echo isset($usuario['id']) ? 'Actualizar' : 'Crear'; ?></button>
    <button type="button" onclick="closeModal()">Cancelar</button>
</form>